<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Merge Sort</title>
</head>
<body>
<script>

    /** 排序規則 **/

    /** 特性 **/

    const array = [14, 4, 24, 5, 9];

    function mergeSort(data) {
        /** 進行切割的程序 **/

            // 把陣列的每個單位, 切割成一組的指標
        let parts = data.map((value, index) => {
                // 每一個單位都具有 start & end, 分別指向自己所屬的 index
                return {start: index, end: index};
            });

        // 用來存放一邊已經排完, 另一邊剩下的
        let nextParts = [];

        /** 進行合併的程序 **/
        // 因為每一輪迴圈都是以左右兩個數字為一組做比較, 所以 i + 2
        for (let i = 0; i < parts.length; i += 2) {
            // 檢查這一輪比較, 是否有左右兩邊
            // 有的話就進入比較, 沒有的話就把剩下的全部放入 nextParts 中
            if (parts[i + 1]) {
                /** 準備每一輪要被比較的指針 & data **/

                    // 從 part 中取出這一組要比較的左邊指針
                const leftPart = parts[i];
                //  從 part 中取出這一組要比較的右邊指針
                const rightPart = parts[i + 1];

                // 使用 leftPart 指針, 從 data 複製出這一組的左陣列
                const leftArray = data.slice(leftPart.start, leftPart.end + 1);
                // 使用 rightPart 指針, 從 data 複製出這一組的右陣列
                const rightArray = data.slice(rightPart.start, rightPart.end + 1);

                /** 初始設定每一輪的指針 **/

                    // 每一組都從 index 0 開始比較起
                let leftIndex = 0;
                let rightIndex = 0;

                // allDataIndex 紀錄當前整個 data 的指針位置
                // 初始從最左邊比較起, 所以是 leftPart 的 start
                let allDataIndex = leftPart.start;

                /** 開始使用指針進行比較 **/

                while (leftIndex < leftArray.length && rightIndex < rightArray.length) {
                    if (leftArray[leftIndex] < rightArray[rightIndex]) {
                        data[allDataIndex] = leftArray[leftIndex];
                        leftIndex++;
                    } else {
                        data[allDataIndex] = rightArray[rightIndex];
                        rightIndex++;
                    }
                    allDataIndex++;
                }
            }
        }

    }

    mergeSort(array);


</script>
</body>
</html>
